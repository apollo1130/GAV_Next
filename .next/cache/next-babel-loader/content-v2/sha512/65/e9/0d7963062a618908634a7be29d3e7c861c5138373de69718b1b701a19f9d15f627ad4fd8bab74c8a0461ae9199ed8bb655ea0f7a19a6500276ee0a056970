{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/gav(1)/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { SocialButton, UiButton } from \"../../components/UI/Button\";\nimport { AuthInput } from \"../../components/UI/TextInput\";\nimport { ToastContainer } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport { FcGoogle } from \"react-icons/fc\";\nimport { ImFacebook } from \"react-icons/im\";\nimport { FaEye, FaEyeSlash, FaLock } from \"react-icons/fa\";\nimport Link from \"next/link\";\nimport React, { useState, useEffect } from \"react\";\nimport { notify } from \"../../utils/common\";\nimport { signIn } from \"next-auth/client\";\nimport { getMe } from \"../../api/auth\";\n\nvar LoginPage = function LoginPage() {\n  //const dispatch = useDispatch()\n  var router = useRouter(); // const [username, setUsername] = useState('motorista.mkp.gav@gmail.com ')\n\n  var _useState = useState(\"\"),\n      username = _useState[0],\n      setUsername = _useState[1]; // const [username, setUsername] = useState('janderson.rdsilva@gmail.com')\n  // const [password, setPassword] = useState('12345678')\n\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(true),\n      showPassword = _useState3[0],\n      setShowPassword = _useState3[1];\n\n  var _useState4 = useState(false),\n      isLodding = _useState4[0],\n      setLodding = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      error = _useState5[0],\n      setError = _useState5[1];\n\n  var submitLogin = function submitLogin(e) {\n    e.preventDefault();\n    setLodding(true);\n\n    try {\n      signIn(\"credentials\", {\n        username: username,\n        password: password\n      }).then(function (data) {\n        console.log(\"data\", data);\n        return;\n        setLodding(false);\n      })[\"catch\"](function (error) {\n        notify(\"error\", error);\n        setLodding(false);\n      });\n    } catch (error) {\n      notify(\"error\", error);\n      setLodding(false);\n    }\n  };\n\n  var handleInput = function handleInput(event) {\n    if (event.target.name === \"username\") {\n      setUsername(event.target.value);\n    } else if (event.target.name === \"password\") {\n      setPassword(event.target.value);\n    }\n  };\n\n  var handleProvider = function handleProvider(event) {\n    console.log(event.target.name);\n\n    if (event.target.name !== undefined) {\n      signIn(event.target.name);\n    }\n  };\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var params, _iterator, _step, p, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            params = new URLSearchParams(window.location.search);\n            _iterator = _createForOfIteratorHelper(params);\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                p = _step.value;\n\n                if (p[0] === \"error\") {// notify(\"error\", \"Error in \" + p[1])\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            setLodding(true);\n            _context.next = 6;\n            return getMe();\n\n          case 6:\n            data = _context.sent;\n            console.log(\"me data\", data);\n\n            if (data) {\n              // debugger\n              if (data.pessoa_cadastro_id === 2) {\n                router.push(\"/registrar-fornecedor-form\");\n              }\n\n              if (data.pessoa_cadastro_id === 3) {\n                router.push(\"/registrar-motorista-form\");\n              }\n            }\n\n            setLodding(false);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"login-area text-center\",\n    children: [/*#__PURE__*/_jsx(ToastContainer, {\n      style: {\n        zIndex: 99999\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"login-outer\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"login-logo mb-4\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"cursor-pointer\",\n            src: \"/images/logo.png\",\n            alt: \"\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"login-form\",\n        children: /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: submitLogin,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"mr-4\",\n            children: [/*#__PURE__*/_jsx(AuthInput, {\n              required: true,\n              type: \"email\",\n              label: \"Email\",\n              name: \"username\",\n              value: username,\n              onChange: handleInput\n            }), /*#__PURE__*/_jsx(AuthInput, {\n              required: true,\n              type: showPassword ? \"password\" : \"text\",\n              label: \"Senha\",\n              name: \"password\",\n              value: password,\n              onChange: handleInput\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"login-eye-icon d-flex justify-content-end\",\n            children: showPassword ? /*#__PURE__*/_jsx(FaEye, {\n              onClick: function onClick() {\n                return setShowPassword(!showPassword);\n              },\n              className: \"mb-3\",\n              size: \"20\"\n            }) : /*#__PURE__*/_jsx(FaEyeSlash, {\n              onClick: function onClick() {\n                return setShowPassword(!showPassword);\n              },\n              className: \"mb-3\",\n              size: \"20\"\n            })\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: \"login-forget d-flex justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsx(FaLock, {\n              className: \"mr-3\"\n            }), \"Esqueceu sua senha?\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-3 mt-3\",\n            children: /*#__PURE__*/_jsx(UiButton, {\n              loading: isLodding,\n              title: \"Entrar\",\n              type: \"submit\",\n              className: \"w-100 py-lg-2 py-1 login-btn\"\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"login-footer\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"login-text-left text-left pt-4\",\n          children: \"Ou entre com\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-3 mt-3\",\n          children: /*#__PURE__*/_jsx(SocialButton, {\n            title: \"Google\",\n            icon: /*#__PURE__*/_jsx(FcGoogle, {}),\n            name: \"google\",\n            onClick: handleProvider\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-3 mt-3\",\n          children: /*#__PURE__*/_jsx(SocialButton, {\n            title: \"Facebook\",\n            icon: /*#__PURE__*/_jsx(ImFacebook, {}),\n            name: \"facebook\",\n            onClick: handleProvider\n          })\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: \"login-bottom-text\",\n          children: [\"N\\xE3o tem uma conta?\", /*#__PURE__*/_jsx(Link, {\n            href: \"/escolha-registro\",\n            children: /*#__PURE__*/_jsx(\"span\", {\n              className: \"cursor-pointer\",\n              children: \" Cadastre-se\"\n            })\n          })]\n        })]\n      })]\n    })]\n  });\n};\n\nexport default LoginPage;","map":null,"metadata":{},"sourceType":"module"}