{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useState } from \"react\";\nimport { Col, Row, Dropdown } from \"react-bootstrap\";\nimport Alert from 'react-bootstrap/Alert';\nimport SingleVehicle from \"../../components/Snippets/SingleVehicle\";\nimport DashboardLayout from \"../../layouts/Dashboard\";\nimport { FiSettings } from \"react-icons/fi\";\nimport { FaPlus } from \"react-icons/fa\";\nimport Link from \"next/link\";\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\nimport PrimaryModal from \"../../components/Snippets/PrimaryModal\";\nimport PrimaryRatingModal from \"../../components/Snippets/RatingModal\";\nimport { ownerListOfCars } from \"../../api/owner/cars/listOfCars\";\nimport { ContactPerson } from \"../../api/profile/contactPerson\";\nimport { deleteCar } from \"../../api/owner/cars/deleteCar\";\nimport { carDetails } from \"../../api/owner/cars/listOfCars\";\nimport { updateAvaliar } from \"../../api/owner/avaliar\";\nimport { useDispatch } from \"react-redux\";\nimport { FullPageLoader } from \"../../components/UI/Loader\";\nimport { notify, useInput } from \"../../utils/common\";\nimport { ToastContainer } from 'react-toastify';\nimport Button from 'react-bootstrap/Button';\nimport { useRouter } from \"next/router\";\n\nconst MyVehicles = () => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: cars,\n    1: setCars\n  } = useState([]);\n  const {\n    0: modalCar,\n    1: setModalCar\n  } = useState({});\n  const {\n    0: person,\n    1: setPerson\n  } = useState({});\n  const {\n    0: avaliar,\n    1: setAvaliar\n  } = useState({});\n  const {\n    0: showAnother,\n    1: setShowAnother\n  } = useState(false);\n  const {\n    0: showLast,\n    1: setShowLast\n  } = useState(false);\n  const {\n    0: showNext,\n    1: setShowNext\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: deleteAlertShow,\n    1: setDeleteAlertShow\n  } = useState(false);\n  const {\n    0: ratingOne,\n    1: setRatingOne\n  } = useState(0);\n  const {\n    0: ratingTwo,\n    1: setRatingTwo\n  } = useState(0);\n  const {\n    0: ratingThree,\n    1: setRatingThree\n  } = useState(0);\n  const {\n    0: ratingFour,\n    1: setRatingFour\n  } = useState(0);\n  const {\n    0: avaliarId,\n    1: setAvaliarId\n  } = useState(0);\n  const {\n    0: carroId,\n    1: setCarroId\n  } = useState(0);\n  const {\n    0: nps,\n    1: setNps\n  } = useState(null);\n  useEffect(() => {\n    getCars();\n    getContactPerson();\n  }, []);\n\n  const getCars = async () => {\n    setLoading(true);\n    const queryParamsObj = {\n      per_page: 15,\n      page: 1,\n      include: 'modelo, carro_status'\n    };\n    const newCars = await ownerListOfCars(queryParamsObj, () => {\n      setLoading(false);\n    });\n\n    if (newCars != null) {\n      setCars(newCars.data);\n    }\n\n    setLoading(false);\n  };\n\n  console.log('cars', cars);\n\n  const removeCar = async id => {\n    setLoading(true);\n    const data = await deleteCar(id); //const data = []\n\n    if (data) {\n      const updatedCar = cars.filter(car => {\n        return car.id !== id;\n      });\n      setCars(updatedCar);\n    }\n\n    setLoading(false);\n  };\n\n  const contactClicked = car => {\n    setShowAnother(true);\n    setModalCar(car);\n    setCarroId(car.carro_status.id);\n  };\n\n  const getContactPerson = async () => {\n    const newPerson = await ContactPerson(() => {});\n\n    if (newPerson != null) {\n      setPerson(newPerson.data);\n    }\n\n    setLoading(false);\n  };\n\n  const clickAvaliar = item => {\n    setShowLast(true);\n    setShowAnother(false);\n    setAvaliar(item);\n    setAvaliarId(item.id);\n  };\n\n  const NpsChange = e => {\n    setNps(2);\n  };\n\n  const itens = [{\n    \"nota\": ratingOne,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingTwo,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingThree,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingFour,\n    \"avaliacao_item_id\": avaliarId\n  }];\n\n  const avaliarClick = async () => {\n    const updated = await updateAvaliar(nps, carroId, itens);\n  };\n\n  return /*#__PURE__*/_jsx(DashboardLayout, {\n    children: isLoading ? /*#__PURE__*/_jsx(FullPageLoader, {\n      loading: isLoading\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"my-vehicles-area\",\n      children: [/*#__PURE__*/_jsx(ToastContainer, {\n        style: {\n          zIndex: 99999\n        }\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [cars.length > 0 ? cars.map(function (car, i) {\n          return /*#__PURE__*/_jsxs(Row, {\n            children: [/*#__PURE__*/_jsx(Col, {\n              xl: 6,\n              children: /*#__PURE__*/_jsx(SingleVehicle, {\n                status: \"rent\",\n                car: car\n              })\n            }), /*#__PURE__*/_jsxs(Col, {\n              lg: {\n                span: 4,\n                offset: 2\n              },\n              className: \"custom-dropdown mb-lg-0 mb-5\",\n              children: [/*#__PURE__*/_jsxs(Dropdown, {\n                drop: \"down\",\n                className: \"d-flex justify-content-end\",\n                children: [/*#__PURE__*/_jsx(Dropdown.Toggle, {\n                  id: \"dropdown-basic\",\n                  children: /*#__PURE__*/_jsx(FiSettings, {\n                    className: \"d-block ml-auto single-vehicle-setting-icon cursor-pointer\"\n                  })\n                }), car.carro_status_id != 2 ? /*#__PURE__*/_jsxs(Dropdown.Menu, {\n                  children: [/*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-1\",\n                    onClick: () => {\n                      router.push({\n                        pathname: '/ver-meu-anuncio'\n                      });\n                    },\n                    children: \"Ver an\\xFAncio\"\n                  }), /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: () => contactClicked(car),\n                    children: \"Ver contrato\"\n                  }), /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: () => setShow(true),\n                    children: \"Excluir\"\n                  })]\n                }) : /*#__PURE__*/_jsx(Dropdown.Menu, {\n                  children: /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: () => setShow(true),\n                    children: \"Excluir\"\n                  })\n                }), /*#__PURE__*/_jsxs(Alert, {\n                  variant: \"danger\",\n                  show: deleteAlertShow,\n                  onClose: () => setDeleteAlertShow(false),\n                  dismissible: true,\n                  children: [/*#__PURE__*/_jsx(Alert.Heading, {\n                    children: \"Tem certeza?\"\n                  }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"d-flex justify-content-end\",\n                    children: /*#__PURE__*/_jsx(Button, {\n                      onClick: () => removeCar(car.id),\n                      variant: \"outline-success\",\n                      children: \"Sim\"\n                    })\n                  })]\n                })]\n              }), car.carro_status_id === 2 ? /*#__PURE__*/_jsx(\"button\", {\n                onClick: () => {\n                  router.push({\n                    pathname: '/listar-carros-disponiveis-fornecedor'\n                  });\n                },\n                className: \"single-vehicle-btn ml-auto d-block\",\n                children: \"Conversar\"\n              }) : /*#__PURE__*/_jsx(Col, {\n                lg: 12,\n                className: \"custom-dropdown mb-lg-0 mb-5\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  onClick: () => {\n                    router.push({\n                      pathname: '/ver-meu-anuncio'\n                    });\n                  },\n                  className: \"single-vehicle-btn single-vehicle-btn-ver ml-auto d-block\",\n                  children: \"Ver an\\xFAncio\"\n                })\n              })]\n            })]\n          }, i);\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          children: \" No cars found\"\n        }), /*#__PURE__*/_jsx(Col, {\n          lg: {\n            span: 4,\n            offset: 8\n          },\n          className: \"pr-0\",\n          children: /*#__PURE__*/_jsx(Link, {\n            href: {\n              pathname: '/registrar-fornecedor-form',\n              query: {\n                step: '2'\n              }\n            },\n            children: /*#__PURE__*/_jsxs(\"button\", {\n              className: \"single-vehicle-btn single-vehicle-btn-adi ml-auto d-block\",\n              children: [\"Adicionar Ve\\xEDculo \", /*#__PURE__*/_jsx(FaPlus, {\n                className: \"mr-2\"\n              })]\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        twoBtn: true,\n        show: show,\n        onClick: () => setDeleteAlertShow(true),\n        onClose: () => setShow(false),\n        title: \"Tem certeza que deseja apagar essean\\xFAncio, tal a\\xE7\\xE3o n\\xE3o poder\\xE1 ser desfeita!\"\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        show: showNext,\n        onClose: () => setShowNext(false),\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"my-vehicles-area__modal\",\n          children: [/*#__PURE__*/_jsx(AiOutlineArrowLeft, {\n            onClick: () => setShowNext(false),\n            className: \"my-vehicles-area__modal-back\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"my-vehicles-area__modal-title\",\n            children: \"Avalia\\xE7\\xE3o\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"d-md-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/images/logo.png\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"my-vehicles-area__modal-des\",\n              children: \"\\\"O seu feedback \\xE9 muito importante para o seu e o nosso sucesso. Nos avalie!\\\"\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"my-vehicles-area__rating-block-right\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"pt-4\",\n              children: \"Recomendaria a GAV para outros fornecedores que querem alugar?\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"my-vehicles-area__rating-block-right-block py-4\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: \"N\\xE3o\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"d-flex align-items-center justify-content-center\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault1\"\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    for: \"flexRadioDefault1\",\n                    children: \"1\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    for: \"flexRadioDefault2\",\n                    children: \"2\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    for: \"flexRadioDefault2\",\n                    children: \"3\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    for: \"flexRadioDefault2\",\n                    children: \"4\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    for: \"flexRadioDefault2\",\n                    children: \"5\"\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"Sim\"\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: \"my-vehicles-area__btn2\",\n            children: \"Deixe o seu coment\\xE1rio sobre esse motorista..\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: \"my-vehicles-area__btn mx-auto d-block\",\n            children: \"Avaliar\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(PrimaryRatingModal, {\n        show: showLast,\n        onClose: () => setShowLast(false),\n        person: avaliar,\n        npsChange: NpsChange,\n        ratingOne: ratingOne,\n        ratingOneChange: ratingOne => setRatingOne(ratingOne),\n        ratingTwo: ratingTwo,\n        ratingTwoChange: ratingTwo => setRatingTwo(ratingTwo),\n        ratingThree: ratingThree,\n        ratingThreeChange: ratingThree => setRatingThree(ratingThree),\n        ratingFour: ratingFour,\n        ratingFourChange: ratingFour => setRatingFour(ratingFour),\n        onClickAva: avaliarClick\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        show: showAnother,\n        onClose: () => setShowAnother(false),\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"my-vehicles-area__modal\",\n          children: [/*#__PURE__*/_jsx(AiOutlineArrowLeft, {\n            onClick: () => setShowAnother(false),\n            className: \"my-vehicles-area__modal-back\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"my-vehicles-area__modal-title\",\n            children: \"Contrato\"\n          }), /*#__PURE__*/_jsx(SingleVehicle, {\n            car: modalCar\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"my-vehicles-area__modal-person\",\n            children: person && person.length > 0 && person.map((item, i) => {\n              return item.carro.cobrancas.map((innerItem, index) => {\n                return /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(SingleVehicle, {\n                    location: \"Locat\\xE1rio\",\n                    inicio: \"In\\xEDcio do contrato\",\n                    fim: \"Fim do contrato\",\n                    value1: \"Alexandre Garcia\",\n                    value2: innerItem.data_inicio,\n                    value3: innerItem.data_fim,\n                    ratingComponent: true,\n                    ratingNumber: 4,\n                    hasUnderline: true,\n                    avatar: \"/images/supplier-avatar.png\"\n                  }), /*#__PURE__*/_jsx(\"button\", {\n                    onClick: () => clickAvaliar(item),\n                    className: \"my-vehicles-area__btn mx-auto d-block my-3\",\n                    children: \"Avaliar\"\n                  })]\n                }, index);\n              });\n            })\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport default MyVehicles;","map":null,"metadata":{},"sourceType":"module"}