{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { config } from \"../../config\";\nimport { getSession } from 'next-auth/client';\nimport httpRequest from \"../../utils/request\";\nimport { notify, useInput } from \"../../utils/common\";\nexport const updateDriver = async (newData, obj) => {\n  try {\n    const pessoa_fisica = _objectSpread(_objectSpread({}, obj.pessoa_fisica), {}, {\n      cpf: newData.cpf,\n      nome: newData.nome\n    });\n\n    const endereco = [{\n      \"latitude\": obj.latitude,\n      \"longitude\": obj.longitude,\n      \"logradouro\": newData.rua,\n      \"cep\": newData.cep,\n      \"numero\": newData.numero,\n      \"complemento\": newData.complemento,\n      \"bairro\": newData.bairro,\n      \"cidade_id\": newData.cidadeId\n    }];\n    let pessoa_arquivos = [];\n\n    if (obj.pessoa_arquivos) {\n      pessoa_arquivos = [...obj.pessoa_arquivos];\n    }\n\n    if (newData.cnhId) {\n      pessoa_arquivos.push({\n        arquivo_id: newData.cnhId,\n        pessoa_arquivo_tipo_id: 1\n      });\n    }\n\n    if (newData.segurandoId) {\n      pessoa_arquivos.push({\n        arquivo_id: newData.segurandoId,\n        pessoa_arquivo_tipo_id: 2\n      });\n    }\n\n    if (newData.comprovanteId) {\n      pessoa_arquivos.push({\n        arquivo_id: newData.comprovanteId,\n        pessoa_arquivo_tipo_id: 3\n      });\n    }\n\n    if (newData.rgId) {\n      pessoa_arquivos.push({\n        arquivo_id: newData.rgId,\n        pessoa_arquivo_tipo_id: 5\n      });\n    }\n\n    const body = _objectSpread(_objectSpread({\n      telefone: obj.telefone,\n      celular: newData.celular,\n      email: newData.email,\n      pessoa_tipo_id: obj.pessoa_tipo_id,\n      pessoa_cadastro_id: obj.pessoa_cadastro_id,\n      pessoa_status_id: obj.pessoa_status_id,\n      recebe_via_administrador: obj.recebe_via_administrador,\n      pessoa_fisica: pessoa_fisica,\n      pessoa_juridica: obj.pessoa_juridica,\n      endereco: [endereco],\n      carros: obj.carros,\n      pessoa_arquivos: obj.pessoa_arquivos,\n      conta_bancaria: obj.conta_bancaria\n    }, pessoa_arquivos.length && {\n      pessoa_arquivos: pessoa_arquivos\n    }), newData.prefilId && {\n      foto_perfil_arquivo_id: newData.prefilId\n    }); //cnhID, rgId, segurandoId, comprovanteId, prefilId\n    // debugger\n\n\n    console.log(\"body = \", body);\n    const session = await getSession();\n    const token = 'Bearer ' + session.access_token;\n    const {\n      data\n    } = await httpRequest.patch(`${config.baseUrl}/api/motorista`, true, token, body);\n    console.log(\"updated data = \", data);\n    return data;\n  } catch (error) {\n    console.log(error);\n    notify(\"error\", error.response ? error.response.data.message : '');\n    return null;\n  }\n};\nexport const getCep = async cep => {\n  try {\n    const session = await getSession();\n    const token = 'Bearer ' + session.access_token;\n    const {\n      data\n    } = await httpRequest.get(`${config.baseUrl}/api/cep/${cep}`, true, token);\n    return data;\n  } catch (error) {\n    //console.log(error.response.data)\n    return null;\n  }\n};","map":{"version":3,"sources":["D:/gav(1)/api/driver/updateDriver.js"],"names":["config","getSession","httpRequest","notify","useInput","updateDriver","newData","obj","pessoa_fisica","cpf","nome","endereco","latitude","longitude","rua","cep","numero","complemento","bairro","cidadeId","pessoa_arquivos","cnhId","push","arquivo_id","pessoa_arquivo_tipo_id","segurandoId","comprovanteId","rgId","body","telefone","celular","email","pessoa_tipo_id","pessoa_cadastro_id","pessoa_status_id","recebe_via_administrador","pessoa_juridica","carros","conta_bancaria","length","prefilId","foto_perfil_arquivo_id","console","log","session","token","access_token","data","patch","baseUrl","error","response","message","getCep","get"],"mappings":"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","sourcesContent":["import { config } from \"../../config\"\nimport { getSession } from 'next-auth/client'\nimport httpRequest from \"../../utils/request\"\nimport { notify, useInput } from \"../../utils/common\"\n\nexport const updateDriver = async (newData, obj) => {\n    try {\n\n        const pessoa_fisica = { ...obj.pessoa_fisica, cpf: newData.cpf, nome: newData.nome }\n        const endereco = [{\n            \"latitude\": obj.latitude,\n            \"longitude\": obj.longitude,\n            \"logradouro\": newData.rua,\n            \"cep\": newData.cep,\n            \"numero\": newData.numero,\n            \"complemento\": newData.complemento,\n            \"bairro\": newData.bairro,\n            \"cidade_id\": newData.cidadeId\n        }]\n\n        let pessoa_arquivos = []\n\n        if (obj.pessoa_arquivos) {\n            pessoa_arquivos = [...obj.pessoa_arquivos]\n        }\n\n        if (newData.cnhId) {\n            pessoa_arquivos.push({ arquivo_id: newData.cnhId, pessoa_arquivo_tipo_id: 1 })\n        }\n        if (newData.segurandoId) {\n            pessoa_arquivos.push({arquivo_id: newData.segurandoId, pessoa_arquivo_tipo_id: 2 })\n        }\n\n        if (newData.comprovanteId) {\n            pessoa_arquivos.push({ arquivo_id: newData.comprovanteId, pessoa_arquivo_tipo_id: 3 })\n        }\n        if (newData.rgId) {\n            pessoa_arquivos.push({ arquivo_id: newData.rgId, pessoa_arquivo_tipo_id: 5 })\n        }\n\n        const body = {\n            telefone: obj.telefone,\n            celular: newData.celular,\n            email: newData.email,\n            pessoa_tipo_id: obj.pessoa_tipo_id,\n            pessoa_cadastro_id: obj.pessoa_cadastro_id,\n            pessoa_status_id: obj.pessoa_status_id,\n            recebe_via_administrador: obj.recebe_via_administrador,\n            pessoa_fisica: pessoa_fisica,\n            pessoa_juridica: obj.pessoa_juridica,\n            endereco: [endereco],\n            carros: obj.carros,\n            pessoa_arquivos: obj.pessoa_arquivos,\n            conta_bancaria: obj.conta_bancaria,\n            ...(pessoa_arquivos.length && {pessoa_arquivos: pessoa_arquivos}),\n            ...(newData.prefilId && { foto_perfil_arquivo_id: newData.prefilId })\n        }\n        //cnhID, rgId, segurandoId, comprovanteId, prefilId\n        // debugger\n        console.log(\"body = \", body)\n        const session = await getSession()\n        const token = 'Bearer ' + session.access_token\n\n        const { data } = await httpRequest.patch(\n            `${config.baseUrl}/api/motorista`,\n            true,\n            token,\n            body\n        )\n        console.log(\"updated data = \", data)\n        return data\n\n    } catch (error) {\n        console.log(error)\n        notify(\"error\", error.response ? error.response.data.message : '')\n        return null\n    }\n}\n\n\nexport const getCep = async (cep) => {\n    try {\n\n\n        const session = await getSession()\n        const token = 'Bearer ' + session.access_token\n\n        const { data } = await httpRequest.get(\n            `${config.baseUrl}/api/cep/${cep}`,\n            true,\n            token)\n        return data\n\n    } catch (error) {\n        //console.log(error.response.data)\n\n        return null\n    }\n}"]},"metadata":{},"sourceType":"module"}