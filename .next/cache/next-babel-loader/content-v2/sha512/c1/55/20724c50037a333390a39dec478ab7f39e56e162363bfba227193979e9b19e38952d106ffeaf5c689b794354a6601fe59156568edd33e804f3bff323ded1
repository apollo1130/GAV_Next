{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { SocialButton, UiButton } from \"../../components/UI/Button\";\nimport { AuthInput } from \"../../components/UI/TextInput\";\nimport { ToastContainer } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport { FcGoogle } from \"react-icons/fc\";\nimport { ImFacebook } from \"react-icons/im\";\nimport { FaEye, FaEyeSlash, FaLock } from \"react-icons/fa\";\nimport Link from \"next/link\";\nimport React, { useState, useEffect } from \"react\";\nimport { notify } from \"../../utils/common\";\nimport { signIn } from \"next-auth/client\";\nimport { getMe } from \"../../api/auth\";\n\nconst LoginPage = () => {\n  //const dispatch = useDispatch()\n  const router = useRouter(); // const [username, setUsername] = useState('motorista.mkp.gav@gmail.com ')\n\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"\"); // const [username, setUsername] = useState('janderson.rdsilva@gmail.com')\n  // const [password, setPassword] = useState('12345678')\n\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: showPassword,\n    1: setShowPassword\n  } = useState(true);\n  const {\n    0: isLodding,\n    1: setLodding\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(\"\");\n\n  const submitLogin = e => {\n    e.preventDefault();\n    setLodding(true);\n\n    try {\n      signIn(\"credentials\", {\n        username: username,\n        password: password\n      }).then(data => {\n        console.log(\"data\", data);\n        return;\n        setLodding(false);\n      }).catch(error => {\n        notify(\"error\", error);\n        setLodding(false);\n      });\n    } catch (error) {\n      notify(\"error\", error);\n      setLodding(false);\n    }\n  };\n\n  const handleInput = event => {\n    if (event.target.name === \"username\") {\n      setUsername(event.target.value);\n    } else if (event.target.name === \"password\") {\n      setPassword(event.target.value);\n    }\n  };\n\n  const handleProvider = event => {\n    console.log(event.target.name);\n\n    if (event.target.name !== undefined) {\n      signIn(event.target.name);\n    }\n  };\n\n  useEffect(async () => {\n    const params = new URLSearchParams(window.location.search);\n\n    for (let p of params) {\n      if (p[0] === \"error\") {// notify(\"error\", \"Error in \" + p[1])\n      }\n    }\n\n    setLodding(true);\n    const data = await getMe();\n    console.log(\"me data\", data);\n\n    if (data) {\n      // debugger\n      if (data.pessoa_cadastro_id === 2) {\n        router.push(\"/registrar-fornecedor-form\");\n      }\n\n      if (data.pessoa_cadastro_id === 3) {\n        router.push(\"/registrar-motorista-form\");\n      }\n    }\n\n    setLodding(false);\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"login-area text-center\",\n    children: [/*#__PURE__*/_jsx(ToastContainer, {\n      style: {\n        zIndex: 99999\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"login-outer\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"login-logo mb-4\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"cursor-pointer\",\n            src: \"/images/logo.png\",\n            alt: \"\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"login-form\",\n        children: /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: submitLogin,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"mr-4\",\n            children: [/*#__PURE__*/_jsx(AuthInput, {\n              required: true,\n              type: \"email\",\n              label: \"Email\",\n              name: \"username\",\n              value: username,\n              onChange: handleInput\n            }), /*#__PURE__*/_jsx(AuthInput, {\n              required: true,\n              type: showPassword ? \"password\" : \"text\",\n              label: \"Senha\",\n              name: \"password\",\n              value: password,\n              onChange: handleInput\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"login-eye-icon d-flex justify-content-end\",\n            children: showPassword ? /*#__PURE__*/_jsx(FaEye, {\n              onClick: () => setShowPassword(!showPassword),\n              className: \"mb-3\",\n              size: \"20\"\n            }) : /*#__PURE__*/_jsx(FaEyeSlash, {\n              onClick: () => setShowPassword(!showPassword),\n              className: \"mb-3\",\n              size: \"20\"\n            })\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: \"login-forget d-flex justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsx(FaLock, {\n              className: \"mr-3\"\n            }), \"Esqueceu sua senha?\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-3 mt-3\",\n            children: /*#__PURE__*/_jsx(UiButton, {\n              loading: isLodding,\n              title: \"Entrar\",\n              type: \"submit\",\n              className: \"w-100 py-lg-2 py-1 login-btn\"\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"login-footer\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"login-text-left text-left pt-4\",\n          children: \"Ou entre com\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-3 mt-3\",\n          children: /*#__PURE__*/_jsx(SocialButton, {\n            title: \"Google\",\n            icon: /*#__PURE__*/_jsx(FcGoogle, {}),\n            name: \"google\",\n            onClick: handleProvider\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-3 mt-3\",\n          children: /*#__PURE__*/_jsx(SocialButton, {\n            title: \"Facebook\",\n            icon: /*#__PURE__*/_jsx(ImFacebook, {}),\n            name: \"facebook\",\n            onClick: handleProvider\n          })\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: \"login-bottom-text\",\n          children: [\"N\\xE3o tem uma conta?\", /*#__PURE__*/_jsx(Link, {\n            href: \"/escolha-registro\",\n            children: /*#__PURE__*/_jsx(\"span\", {\n              className: \"cursor-pointer\",\n              children: \" Cadastre-se\"\n            })\n          })]\n        })]\n      })]\n    })]\n  });\n};\n\nexport default LoginPage;","map":null,"metadata":{},"sourceType":"module"}