{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/gav(1)/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Col, Row } from \"react-bootstrap\";\nimport { UiButton } from \"../UI/Button\";\nimport { useRouter } from 'next/router';\nimport UploadPhoto from \"../UI/Photo\";\nimport { useState } from \"react\";\nimport { createFile } from \"../../api/files/createFiles\";\nimport { updateDriver } from '../../api/driver/updateDriver';\nimport { ToastContainer } from 'react-toastify';\n\nvar UploadPhotos = function UploadPhotos(_ref) {\n  var activeStep = _ref.activeStep,\n      uploadBack = _ref.uploadBack,\n      driver = _ref.driver,\n      prevDriver = _ref.prevDriver;\n  var router = useRouter();\n\n  var _useState = useState(null),\n      cnhUrl = _useState[0],\n      setCnhUrl = _useState[1];\n\n  var _useState2 = useState(null),\n      rgUrl = _useState2[0],\n      setRgUrl = _useState2[1];\n\n  var _useState3 = useState(null),\n      segurandoUrl = _useState3[0],\n      setSegurandoUrl = _useState3[1];\n\n  var _useState4 = useState(null),\n      comprovanteUrl = _useState4[0],\n      setComprovanteUrl = _useState4[1];\n\n  var _useState5 = useState(null),\n      prefilUrl = _useState5[0],\n      setPrefilUrl = _useState5[1];\n\n  var _useState6 = useState(null),\n      cnhId = _useState6[0],\n      setCnhId = _useState6[1];\n\n  var _useState7 = useState(null),\n      rgId = _useState7[0],\n      setRgId = _useState7[1];\n\n  var _useState8 = useState(null),\n      segurandoId = _useState8[0],\n      setSegurandoId = _useState8[1];\n\n  var _useState9 = useState(null),\n      comprovanteId = _useState9[0],\n      setComprovanteId = _useState9[1];\n\n  var _useState10 = useState(null),\n      prefilId = _useState10[0],\n      setPrefilId = _useState10[1];\n\n  var onFileChangeCnh = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var value, formData, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              value = event.target.files[0];\n\n              if (value) {\n                setCnhUrl(URL.createObjectURL(value));\n              }\n\n              formData = new FormData();\n              formData.append(\"file\", value);\n              _context.next = 6;\n              return createFile(formData);\n\n            case 6:\n              res = _context.sent;\n\n              if (res) {\n                setCnhId(res.id);\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onFileChangeCnh(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onFileChangeRg = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      var value, formData, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              value = event.target.files[0];\n\n              if (value) {\n                setRgUrl(URL.createObjectURL(value));\n              }\n\n              formData = new FormData();\n              formData.append(\"file\", value);\n              _context2.next = 6;\n              return createFile(formData);\n\n            case 6:\n              res = _context2.sent;\n\n              if (res) {\n                setRgId(res.id);\n              }\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onFileChangeRg(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onFileChangeSegurando = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n      var value, formData, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              value = event.target.files[0];\n\n              if (value) {\n                setSegurandoUrl(URL.createObjectURL(value));\n              }\n\n              formData = new FormData();\n              formData.append(\"file\", value);\n              _context3.next = 6;\n              return createFile(formData);\n\n            case 6:\n              res = _context3.sent;\n\n              if (res) {\n                setSegurandoId(res.id);\n              }\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onFileChangeSegurando(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onFileChangeComprovante = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event) {\n      var value, formData, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              value = event.target.files[0];\n\n              if (value) {\n                setComprovanteUrl(URL.createObjectURL(value));\n              }\n\n              formData = new FormData();\n              formData.append(\"file\", value);\n              _context4.next = 6;\n              return createFile(formData);\n\n            case 6:\n              res = _context4.sent;\n\n              if (res) {\n                setComprovanteId(res.id);\n              }\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onFileChangeComprovante(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var onFileChangePrefil = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event) {\n      var value, formData, res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              value = event.target.files[0];\n\n              if (value) {\n                setPrefilUrl(URL.createObjectURL(value));\n              }\n\n              formData = new FormData();\n              formData.append(\"file\", value);\n              _context5.next = 6;\n              return createFile(formData);\n\n            case 6:\n              res = _context5.sent;\n\n              if (res) {\n                setPrefilId(res.id);\n              }\n\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function onFileChangePrefil(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var uploadAndRedirect = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var updated;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return updateDriver(_objectSpread(_objectSpread({}, driver), {}, {\n                cnhId: cnhId,\n                rgId: rgId,\n                segurandoId: segurandoId,\n                comprovanteId: comprovanteId,\n                prefilId: prefilId\n              }), prevDriver);\n\n            case 2:\n              updated = _context6.sent;\n\n              if (updated) {\n                router.push('/listar-carros-disponiveis');\n              }\n\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function uploadAndRedirect() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(Row, {\n      children: [/*#__PURE__*/_jsx(ToastContainer, {\n        style: {\n          zIndex: 99999\n        }\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        md: 6,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"mr-lg-3\",\n          children: /*#__PURE__*/_jsx(UploadPhoto, {\n            text: \"CNH\",\n            name: \"cnh\",\n            src: cnhUrl,\n            id: \"cnh\",\n            onFileChange: onFileChangeCnh\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        md: 6,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-lg-3\",\n          children: /*#__PURE__*/_jsx(UploadPhoto, {\n            text: \"RG\",\n            name: \"rg\",\n            src: rgUrl,\n            id: \"rg\",\n            onFileChange: onFileChangeRg\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        md: 6,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-lg-3\",\n          children: /*#__PURE__*/_jsx(UploadPhoto, {\n            text: \"Segurando CNH\",\n            name: \"segurando\",\n            id: \"segurando\",\n            src: segurandoUrl,\n            onFileChange: onFileChangeSegurando\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        md: 6,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-lg-3\",\n          children: /*#__PURE__*/_jsx(UploadPhoto, {\n            text: \"Comprovante de endere\\xE7o\",\n            name: \"comprovante\",\n            id: \"comprovante\",\n            src: comprovanteUrl,\n            onFileChange: onFileChangeComprovante\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(Row, {\n      className: \"justify-content-lg-between\",\n      children: [/*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        md: 6,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-lg-3\",\n          children: /*#__PURE__*/_jsx(UploadPhoto, {\n            text: \"Foto de perfil\",\n            name: \"prefil\",\n            id: \"prefil\",\n            src: prefilUrl,\n            onFileChange: onFileChangePrefil\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: 3,\n        className: \"mb-5\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"ml-lg-3\",\n          children: [activeStep === 0 ? /*#__PURE__*/_jsx(UiButton, {\n            title: \"Cancelar\",\n            variant: \"secondary\",\n            className: \"w-100 mb-4 next-btn\",\n            onClick: function onClick() {\n              return router.push('/');\n            }\n          }) : /*#__PURE__*/_jsx(UiButton, {\n            title: \"Voltar\",\n            variant: \"secondary\",\n            className: \"w-100 mb-4 next-btn\",\n            onClick: uploadBack\n          }), /*#__PURE__*/_jsx(UiButton, {\n            title: \"Pr\\xF3ximo\",\n            className: \"w-100 next-btn\",\n            onClick: uploadAndRedirect\n          })]\n        })\n      })]\n    })]\n  });\n};\n\nexport default UploadPhotos;","map":null,"metadata":{},"sourceType":"module"}