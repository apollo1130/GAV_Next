{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/gav(1)/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useEffect, useState } from \"react\";\nimport { Col, Row, Dropdown } from \"react-bootstrap\";\nimport Alert from 'react-bootstrap/Alert';\nimport SingleVehicle from \"../../components/Snippets/SingleVehicle\";\nimport DashboardLayout from \"../../layouts/Dashboard\";\nimport { FiSettings } from \"react-icons/fi\";\nimport { FaPlus } from \"react-icons/fa\";\nimport Link from \"next/link\";\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\nimport PrimaryModal from \"../../components/Snippets/PrimaryModal\";\nimport PrimaryRatingModal from \"../../components/Snippets/RatingModal\";\nimport { ownerListOfCars } from \"../../api/owner/cars/listOfCars\";\nimport { ContactPerson } from \"../../api/profile/contactPerson\";\nimport { deleteCar } from \"../../api/owner/cars/deleteCar\";\nimport { carDetails } from \"../../api/owner/cars/listOfCars\";\nimport { updateAvaliar } from \"../../api/owner/avaliar\";\nimport { useDispatch } from \"react-redux\";\nimport { FullPageLoader } from \"../../components/UI/Loader\";\nimport { notify, useInput } from \"../../utils/common\";\nimport { ToastContainer } from 'react-toastify';\nimport Button from 'react-bootstrap/Button';\nimport { useRouter } from \"next/router\";\n\nvar MyVehicles = function MyVehicles() {\n  var dispatch = useDispatch();\n  var router = useRouter();\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var _useState2 = useState([]),\n      cars = _useState2[0],\n      setCars = _useState2[1];\n\n  var _useState3 = useState({}),\n      modalCar = _useState3[0],\n      setModalCar = _useState3[1];\n\n  var _useState4 = useState({}),\n      person = _useState4[0],\n      setPerson = _useState4[1];\n\n  var _useState5 = useState({}),\n      avaliar = _useState5[0],\n      setAvaliar = _useState5[1];\n\n  var _useState6 = useState(false),\n      showAnother = _useState6[0],\n      setShowAnother = _useState6[1];\n\n  var _useState7 = useState(false),\n      showLast = _useState7[0],\n      setShowLast = _useState7[1];\n\n  var _useState8 = useState(false),\n      showNext = _useState8[0],\n      setShowNext = _useState8[1];\n\n  var _useState9 = useState(false),\n      isLoading = _useState9[0],\n      setLoading = _useState9[1];\n\n  var _useState10 = useState(false),\n      deleteAlertShow = _useState10[0],\n      setDeleteAlertShow = _useState10[1];\n\n  var _useState11 = useState(0),\n      ratingOne = _useState11[0],\n      setRatingOne = _useState11[1];\n\n  var _useState12 = useState(0),\n      ratingTwo = _useState12[0],\n      setRatingTwo = _useState12[1];\n\n  var _useState13 = useState(0),\n      ratingThree = _useState13[0],\n      setRatingThree = _useState13[1];\n\n  var _useState14 = useState(0),\n      ratingFour = _useState14[0],\n      setRatingFour = _useState14[1];\n\n  var _useState15 = useState(0),\n      avaliarId = _useState15[0],\n      setAvaliarId = _useState15[1];\n\n  var _useState16 = useState(0),\n      carroId = _useState16[0],\n      setCarroId = _useState16[1];\n\n  var _useState17 = useState(null),\n      nps = _useState17[0],\n      setNps = _useState17[1];\n\n  useEffect(function () {\n    getCars();\n    getContactPerson();\n  }, []);\n\n  var getCars = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var queryParamsObj, newCars;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              queryParamsObj = {\n                per_page: 15,\n                page: 1,\n                include: 'modelo, carro_status'\n              };\n              _context.next = 4;\n              return ownerListOfCars(queryParamsObj, function () {\n                setLoading(false);\n              });\n\n            case 4:\n              newCars = _context.sent;\n\n              if (newCars != null) {\n                setCars(newCars.data);\n              }\n\n              setLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCars() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  console.log('cars', cars);\n\n  var removeCar = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var data, updatedCar;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              _context2.next = 3;\n              return deleteCar(id);\n\n            case 3:\n              data = _context2.sent;\n\n              //const data = []\n              if (data) {\n                updatedCar = cars.filter(function (car) {\n                  return car.id !== id;\n                });\n                setCars(updatedCar);\n              }\n\n              setLoading(false);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function removeCar(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var contactClicked = function contactClicked(car) {\n    setShowAnother(true);\n    setModalCar(car);\n    setCarroId(car.carro_status.id);\n  };\n\n  var getContactPerson = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var newPerson;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return ContactPerson(function () {});\n\n            case 2:\n              newPerson = _context3.sent;\n\n              if (newPerson != null) {\n                setPerson(newPerson.data);\n              }\n\n              setLoading(false);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getContactPerson() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var clickAvaliar = function clickAvaliar(item) {\n    setShowLast(true);\n    setShowAnother(false);\n    setAvaliar(item);\n    setAvaliarId(item.id);\n  };\n\n  var NpsChange = function NpsChange(e) {\n    setNps(2);\n  };\n\n  var itens = [{\n    \"nota\": ratingOne,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingTwo,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingThree,\n    \"avaliacao_item_id\": avaliarId\n  }, {\n    \"nota\": ratingFour,\n    \"avaliacao_item_id\": avaliarId\n  }];\n\n  var avaliarClick = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var updated;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return updateAvaliar(nps, carroId, itens);\n\n            case 2:\n              updated = _context4.sent;\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function avaliarClick() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(DashboardLayout, {\n    children: isLoading ? /*#__PURE__*/_jsx(FullPageLoader, {\n      loading: isLoading\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"my-vehicles-area\",\n      children: [/*#__PURE__*/_jsx(ToastContainer, {\n        style: {\n          zIndex: 99999\n        }\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [cars.length > 0 ? cars.map(function (car, i) {\n          return /*#__PURE__*/_jsxs(Row, {\n            children: [/*#__PURE__*/_jsx(Col, {\n              xl: 6,\n              children: /*#__PURE__*/_jsx(SingleVehicle, {\n                status: \"rent\",\n                car: car\n              })\n            }), /*#__PURE__*/_jsxs(Col, {\n              lg: {\n                span: 4,\n                offset: 2\n              },\n              className: \"custom-dropdown mb-lg-0 mb-5\",\n              children: [/*#__PURE__*/_jsxs(Dropdown, {\n                drop: \"down\",\n                className: \"d-flex justify-content-end\",\n                children: [/*#__PURE__*/_jsx(Dropdown.Toggle, {\n                  id: \"dropdown-basic\",\n                  children: /*#__PURE__*/_jsx(FiSettings, {\n                    className: \"d-block ml-auto single-vehicle-setting-icon cursor-pointer\"\n                  })\n                }), car.carro_status_id != 2 ? /*#__PURE__*/_jsxs(Dropdown.Menu, {\n                  children: [/*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-1\",\n                    onClick: function onClick() {\n                      router.push({\n                        pathname: '/ver-meu-anuncio'\n                      });\n                    },\n                    children: \"Ver an\\xFAncio\"\n                  }), /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: function onClick() {\n                      return contactClicked(car);\n                    },\n                    children: \"Ver contrato\"\n                  }), /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: function onClick() {\n                      return setShow(true);\n                    },\n                    children: \"Excluir\"\n                  })]\n                }) : /*#__PURE__*/_jsx(Dropdown.Menu, {\n                  children: /*#__PURE__*/_jsx(Dropdown.Item, {\n                    href: \"#/action-2\",\n                    onClick: function onClick() {\n                      return setShow(true);\n                    },\n                    children: \"Excluir\"\n                  })\n                }), /*#__PURE__*/_jsxs(Alert, {\n                  variant: \"danger\",\n                  show: deleteAlertShow,\n                  onClose: function onClose() {\n                    return setDeleteAlertShow(false);\n                  },\n                  dismissible: true,\n                  children: [/*#__PURE__*/_jsx(Alert.Heading, {\n                    children: \"Tem certeza?\"\n                  }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"d-flex justify-content-end\",\n                    children: /*#__PURE__*/_jsx(Button, {\n                      onClick: function onClick() {\n                        return removeCar(car.id);\n                      },\n                      variant: \"outline-success\",\n                      children: \"Sim\"\n                    })\n                  })]\n                })]\n              }), car.carro_status_id === 2 ? /*#__PURE__*/_jsx(\"button\", {\n                onClick: function onClick() {\n                  router.push({\n                    pathname: '/listar-carros-disponiveis-fornecedor'\n                  });\n                },\n                className: \"single-vehicle-btn ml-auto d-block\",\n                children: \"Conversar\"\n              }) : /*#__PURE__*/_jsx(Col, {\n                lg: 12,\n                className: \"custom-dropdown mb-lg-0 mb-5\",\n                children: /*#__PURE__*/_jsx(\"button\", {\n                  onClick: function onClick() {\n                    router.push({\n                      pathname: '/ver-meu-anuncio'\n                    });\n                  },\n                  className: \"single-vehicle-btn single-vehicle-btn-ver ml-auto d-block\",\n                  children: \"Ver an\\xFAncio\"\n                })\n              })]\n            })]\n          }, i);\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          children: \" No cars found\"\n        }), /*#__PURE__*/_jsx(Col, {\n          lg: {\n            span: 4,\n            offset: 8\n          },\n          className: \"pr-0\",\n          children: /*#__PURE__*/_jsx(Link, {\n            href: {\n              pathname: '/registrar-fornecedor-form',\n              query: {\n                step: '2'\n              }\n            },\n            children: /*#__PURE__*/_jsxs(\"button\", {\n              className: \"single-vehicle-btn single-vehicle-btn-adi ml-auto d-block\",\n              children: [\"Adicionar Ve\\xEDculo \", /*#__PURE__*/_jsx(FaPlus, {\n                className: \"mr-2\"\n              })]\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        twoBtn: true,\n        show: show,\n        onClick: function onClick() {\n          return setDeleteAlertShow(true);\n        },\n        onClose: function onClose() {\n          return setShow(false);\n        },\n        title: \"Tem certeza que deseja apagar essean\\xFAncio, tal a\\xE7\\xE3o n\\xE3o poder\\xE1 ser desfeita!\"\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        show: showNext,\n        onClose: function onClose() {\n          return setShowNext(false);\n        },\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"my-vehicles-area__modal\",\n          children: [/*#__PURE__*/_jsx(AiOutlineArrowLeft, {\n            onClick: function onClick() {\n              return setShowNext(false);\n            },\n            className: \"my-vehicles-area__modal-back\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"my-vehicles-area__modal-title\",\n            children: \"Avalia\\xE7\\xE3o\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"d-md-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/images/logo.png\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"my-vehicles-area__modal-des\",\n              children: \"\\\"O seu feedback \\xE9 muito importante para o seu e o nosso sucesso. Nos avalie!\\\"\"\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"my-vehicles-area__rating-block-right\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"pt-4\",\n              children: \"Recomendaria a GAV para outros fornecedores que querem alugar?\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"my-vehicles-area__rating-block-right-block py-4\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: \"N\\xE3o\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"d-flex align-items-center justify-content-center\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault1\"\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    \"for\": \"flexRadioDefault1\",\n                    children: \"1\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    \"for\": \"flexRadioDefault2\",\n                    children: \"2\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    \"for\": \"flexRadioDefault2\",\n                    children: \"3\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    \"for\": \"flexRadioDefault2\",\n                    children: \"4\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"form-check\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"form-check-input\",\n                    type: \"radio\",\n                    name: \"flexRadioDefault\",\n                    id: \"flexRadioDefault2\",\n                    checked: true\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"form-check-label\",\n                    \"for\": \"flexRadioDefault2\",\n                    children: \"5\"\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(\"p\", {\n                children: \"Sim\"\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: \"my-vehicles-area__btn2\",\n            children: \"Deixe o seu coment\\xE1rio sobre esse motorista..\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: \"my-vehicles-area__btn mx-auto d-block\",\n            children: \"Avaliar\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(PrimaryRatingModal, {\n        show: showLast,\n        onClose: function onClose() {\n          return setShowLast(false);\n        },\n        person: avaliar,\n        npsChange: NpsChange,\n        ratingOne: ratingOne,\n        ratingOneChange: function ratingOneChange(ratingOne) {\n          return setRatingOne(ratingOne);\n        },\n        ratingTwo: ratingTwo,\n        ratingTwoChange: function ratingTwoChange(ratingTwo) {\n          return setRatingTwo(ratingTwo);\n        },\n        ratingThree: ratingThree,\n        ratingThreeChange: function ratingThreeChange(ratingThree) {\n          return setRatingThree(ratingThree);\n        },\n        ratingFour: ratingFour,\n        ratingFourChange: function ratingFourChange(ratingFour) {\n          return setRatingFour(ratingFour);\n        },\n        onClickAva: avaliarClick\n      }), /*#__PURE__*/_jsx(PrimaryModal, {\n        show: showAnother,\n        onClose: function onClose() {\n          return setShowAnother(false);\n        },\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"my-vehicles-area__modal\",\n          children: [/*#__PURE__*/_jsx(AiOutlineArrowLeft, {\n            onClick: function onClick() {\n              return setShowAnother(false);\n            },\n            className: \"my-vehicles-area__modal-back\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"my-vehicles-area__modal-title\",\n            children: \"Contrato\"\n          }), /*#__PURE__*/_jsx(SingleVehicle, {\n            car: modalCar\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"my-vehicles-area__modal-person\",\n            children: person && person.length > 0 && person.map(function (item, i) {\n              return item.carro.cobrancas.map(function (innerItem, index) {\n                return /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(SingleVehicle, {\n                    location: \"Locat\\xE1rio\",\n                    inicio: \"In\\xEDcio do contrato\",\n                    fim: \"Fim do contrato\",\n                    value1: \"Alexandre Garcia\",\n                    value2: innerItem.data_inicio,\n                    value3: innerItem.data_fim,\n                    ratingComponent: true,\n                    ratingNumber: 4,\n                    hasUnderline: true,\n                    avatar: \"/images/supplier-avatar.png\"\n                  }), /*#__PURE__*/_jsx(\"button\", {\n                    onClick: function onClick() {\n                      return clickAvaliar(item);\n                    },\n                    className: \"my-vehicles-area__btn mx-auto d-block my-3\",\n                    children: \"Avaliar\"\n                  })]\n                }, index);\n              });\n            })\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport default MyVehicles;","map":null,"metadata":{},"sourceType":"module"}