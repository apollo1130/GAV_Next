{"ast":null,"code":"import _regeneratorRuntime from \"D:/gav(1)/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport { config } from '../config';\nimport { createPerson } from '../api/cadastro/captasao/createPerson';\nvar domain = config.baseUrl;\nexport var gavProvider = {\n  clientId: config.GAV_CLIENT_ID,\n  clientSecret: config.GAV_CLIENT_SECRET,\n  grant_type: config.grantType\n};\nexport var getToken = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(credentials) {\n    var _yield$axios$post, tokens;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            credentials.scope = '';\n            credentials.grant_type = gavProvider.grant_type;\n            credentials.client_id = gavProvider.clientId;\n            credentials.client_secret = gavProvider.clientSecret; //console.log(\"creadiantials  = \", credentials)\n\n            _context.prev = 4;\n            _context.next = 7;\n            return axios.post(\"\".concat(domain, \"/oauth/token\"), credentials);\n\n          case 7:\n            _yield$axios$post = _context.sent;\n            tokens = _yield$axios$post.data;\n            return _context.abrupt(\"return\", tokens);\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](4);\n            console.log(_context.t0);\n            return _context.abrupt(\"return\", null);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 12]]);\n  }));\n\n  return function getToken(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getMe = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(access_token) {\n    var _yield$axios$get, me;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return axios.get(\"\".concat(domain, \"/api/me\"), {\n              headers: {\n                Authorization: \"Bearer \".concat(access_token),\n                Accept: 'application/json'\n              }\n            });\n\n          case 3:\n            _yield$axios$get = _context2.sent;\n            me = _yield$axios$get.data;\n            return _context2.abrupt(\"return\", me);\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            return _context2.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n\n  return function getMe(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module"}