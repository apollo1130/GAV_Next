{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/gav(1)/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/gav(1)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport DashboardLayout from '../../layouts/Dashboard';\nimport { useState, useEffect } from \"react\";\nimport PersonalInfo from '../../components/DriverRegistration/PersonalInfo';\nimport UploadPhotos from '../../components/DriverRegistration/UploadPhotos';\nimport { recoverDriver } from '../../api/driver/recoverDriver';\nimport { updateDriver, getCep } from '../../api/driver/updateDriver';\nimport { useInput } from \"../../utils/common\";\n\nvar DriverRegistrationForm = function DriverRegistrationForm() {\n  var _useState = useState(0),\n      activeStep = _useState[0],\n      setActiveStep = _useState[1];\n\n  var _useState2 = useState(false),\n      isLodding = _useState2[0],\n      setLodding = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState({}),\n      exDriver = _useState4[0],\n      setExDriver = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      nome = _useState5[0],\n      setnome = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      email = _useState6[0],\n      setemail = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      celular = _useState7[0],\n      setcelular = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      cpf = _useState8[0],\n      setcpf = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      cep = _useState9[0],\n      setcep = _useState9[1];\n\n  var _useState10 = useState(\"\"),\n      estado = _useState10[0],\n      setestado = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      bairro = _useState11[0],\n      setbairro = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      rua = _useState12[0],\n      setrua = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      numero = _useState13[0],\n      setnumero = _useState13[1];\n\n  var _useState14 = useState(\"\"),\n      cidade = _useState14[0],\n      setcidade = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      complemento = _useState15[0],\n      setcomplemento = _useState15[1];\n\n  var _useState16 = useState(\"\"),\n      cidadeId = _useState16[0],\n      setCidadeId = _useState16[1];\n\n  var changeDriver = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var name, value, addr;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              name = e.target.name;\n              value = e.target.value;\n              _context.t0 = name;\n              _context.next = _context.t0 === \"nome\" ? 5 : _context.t0 === \"email\" ? 7 : _context.t0 === \"celular\" ? 9 : _context.t0 === \"cpf\" ? 11 : _context.t0 === \"cep\" ? 13 : _context.t0 === \"estado\" ? 22 : _context.t0 === \"bairro\" ? 24 : _context.t0 === \"rua\" ? 26 : _context.t0 === \"cidade\" ? 28 : _context.t0 === \"numero\" ? 30 : _context.t0 === \"complemento\" ? 32 : 34;\n              break;\n\n            case 5:\n              setnome(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 7:\n              setemail(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 9:\n              setcelular(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 11:\n              setcpf(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 13:\n              console.log(\"value = \", value);\n              setcep(value);\n              setLodding(true);\n              _context.next = 18;\n              return getCep(value);\n\n            case 18:\n              addr = _context.sent;\n\n              if (addr) {\n                console.log(\"add = \", addr);\n                setbairro(addr.bairro);\n                setrua(addr.logradouro);\n                setcidade(addr.cidade.descricao);\n                setestado(addr.cidade.estado.descricao);\n                setCidadeId(addr.cidade.id);\n              }\n\n              setLodding(false);\n              return _context.abrupt(\"break\", 34);\n\n            case 22:\n              setestado(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 24:\n              setbairro(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 26:\n              setrua(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 28:\n              setcidade(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 30:\n              setnumero(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 32:\n              setcomplemento(value);\n              return _context.abrupt(\"break\", 34);\n\n            case 34:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function changeDriver(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var data, addr;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLodding(true);\n            _context2.next = 3;\n            return recoverDriver(function () {\n              setLodding(false);\n            });\n\n          case 3:\n            data = _context2.sent;\n\n            if (data) {\n              console.log(data);\n              setExDriver(data);\n              setnome(data.nome);\n              setemail(data.email);\n              setcelular(data.celular);\n\n              if (data.pessoa_fisica && data.pessoa_fisica.cpf) {\n                setcpf(data.pessoa_fisica.cpf);\n              }\n\n              if (data.endereco.length) {\n                addr = data.endereco[0];\n\n                if (addr.cidade && addr.cidade.descricao) {\n                  setcidade(addr.cidade.descricao);\n                  setCidadeId(addr.cidade.id);\n                }\n\n                if (addr.cidade && addr.cidade.estado && addr.cidade.estado.descricao) {\n                  setestado(addr.cidade.estado.descricao);\n                }\n\n                if (addr.cep) {\n                  setcep(addr.cep);\n                }\n\n                if (addr.bairro) {\n                  setbairro(addr.bairro);\n                }\n\n                if (addr.logradouro) {\n                  setrua(addr.logradouro);\n                }\n\n                if (addr.numero) {\n                  setnumero(addr.numero);\n                }\n\n                if (addr.complemento) {\n                  setcomplemento(addr.complemento);\n                }\n              }\n            }\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), []);\n\n  var clickAndNext = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              //const updated = await updateDriver({ nome, email, celular, cpf, cep, estado, bairro, rua, numero, cidade, complemento, cidadeId }, exDriver)\n              //if(updated){\n              setActiveStep(function (prevActiveStep) {\n                return prevActiveStep + 1;\n              }); //}\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function clickAndNext() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getStepContent = function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/_jsx(PersonalInfo, {\n          activeStep: activeStep,\n          driver: {\n            nome: nome,\n            email: email,\n            celular: celular,\n            cpf: cpf,\n            cep: cep,\n            estado: estado,\n            bairro: bairro,\n            rua: rua,\n            numero: numero,\n            cidade: cidade,\n            complemento: complemento\n          },\n          changeDriver: changeDriver,\n          personalNextClick: clickAndNext\n        });\n\n      case 1:\n        return /*#__PURE__*/_jsx(UploadPhotos, {\n          driver: {\n            nome: nome,\n            email: email,\n            celular: celular,\n            cpf: cpf,\n            cep: cep,\n            estado: estado,\n            bairro: bairro,\n            rua: rua,\n            numero: numero,\n            cidade: cidade,\n            complemento: complemento\n          },\n          activeStep: activeStep,\n          prevDriver: exDriver,\n          uploadBack: function uploadBack() {\n            return setActiveStep(function (prevActiveStep) {\n              return prevActiveStep - 1;\n            });\n          }\n        });\n\n      default:\n        return null;\n    }\n  };\n\n  return /*#__PURE__*/_jsx(DashboardLayout, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"supplier-reg-area mb-5\",\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        className: \"text-primary mb-3\",\n        children: activeStep === 0 ? 'Meus dados' : activeStep === 1 && 'Upload Fotos'\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"d-flex mb-5 pb-3\",\n        children: [/*#__PURE__*/_jsxs(\"button\", {\n          className: \"reg-step-btn w-auto pr-5 \".concat(activeStep === 0 ? 'reg-step-btn-active' : activeStep > 0 ? 'reg-step-btn-done' : ''),\n          onClick: function onClick() {\n            return setActiveStep(0);\n          },\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"reg-step-header\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            children: \"Dados Pessoais\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"button\", {\n          className: \"reg-step-btn w-auto \".concat(activeStep === 1 ? 'reg-step-btn-active' : activeStep > 1 ? 'reg-step-btn-done' : ''),\n          onClick: function onClick() {\n            return setActiveStep(1);\n          },\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"reg-step-header\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            children: \"Upload Fotos\"\n          })]\n        })]\n      }), getStepContent(activeStep)]\n    })\n  });\n};\n\nexport default DriverRegistrationForm;","map":null,"metadata":{},"sourceType":"module"}